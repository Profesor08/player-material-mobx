{"version":3,"sources":["store/PlayerStore.ts","lib/Tracks.ts","components/PlayerControl.tsx","components/SidebarButton.tsx","components/InputRange.tsx","components/Sidebar.tsx","lib/Utils.ts","components/TrackInfo.tsx","components/Progress.tsx","components/AudioPlayer.tsx","components/PlayerControls.tsx","components/Playlist.tsx","components/TrackImages.tsx","components/Player.tsx","components/App.tsx","index.tsx"],"names":["PlayerStore","_class","_ref","arguments","length","undefined","volume","shuffle","repeat","Object","classCallCheck","this","initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","createClass","key","get","_volume","set","applyDecoratedDescriptor","prototype","observable","configurable","enumerable","writable","initializer","computed","getOwnPropertyDescriptor","config","json","localStorage","getItem","data","JSON","parse","err","store","coverSize","x500","x400","x300","x100","x67","x47","x32","x20","x18","x16","buildUrl","url","params","keys","map","param","concat","encodeURIComponent","join","_callee3","response","regenerator_default","a","wrap","_context3","prev","next","fetch","sent","abrupt","stop","getProfileData","_callee4","profileUrl","_context4","client_id","process","t0","Error","getProfileLikes","_callee5","profile","progressCallback","tracks","_context5","id","format","limit","date","Date","now","linked_partitioning","next_href","prepeareTracks","collection","filter","track","trackData","objectSpread","artwork_url","getArtwork","stream_url","prepeareTrack","size","replace","user","avatar_url","includes","shuffleTracks","foundTrack","getRandomTrack","currentTrack","Math","floor","random","push","findRandomTrack","trackId","trackIndex","findIndex","findNextTrack","findPrevTrack","pop","Tracks","require","PlayerControl","props","state","_this","possibleConstructorReturn","getPrototypeOf","call","render","className","active","ripple","react_default","createElement","CSSTransition","in","animated","classNames","timeout","onEntered","setState","onMouseDownCapture","e","preventDefault","onTouchStartCapture","onMouseUpCapture","action","onTouchEndCapture","children","Component","defaultProps","SidebarButton","observer","PlayerControl_PlayerControl","sidebarIsActive","InputRange","inputValue","trackWidth","changeStart","value","changing","onStart","changeStop","onEnd","max","style","width","type","min","step","onChange","parseFloat","target","Sidebar","updateVolume","throttle","_this2","volumeClassName","onClick","src","alt","height","VolumeUp_default","VolumeMute_default","InputRange_InputRange","Utils","t","h","m","s","time","TrackInfo","title","username","duration","playlistActive","formatTimestamp","Progress","updateProgress","progress","audioPlayerProgressNeedsUpdate","parseInt","AudioPlayer","audio","Audio","currentTime","reaction","paused","asyncToGenerator","mark","_callee","_context","pause","play","console","log","_x","apply","addEventListener","_callee2","_context2","warn","PlayerControls","shuffleToggle","Shuffle_default","prevTrack","SkipPrevious_default","playToggle","PlayArrow_default","Pause_default","nextTrack","SkipNext_default","repeatToggle","Repeat_default","RepeatOne_default","Playlist","playlist","scrollToTrack","top","offsetHeight","trackHeight","scrollTo","behavior","ref","progressWidth","playTrack","TrackImages","slider","onPointerDown","x","y","isDragging","pointerStart","pointer","onPointerUp","dist","abs","onPointerMove","prePrevTrack","preNextTrack","clientX","clientY","onPointerLeave","isActive","isPrev","isPrePrev","isNext","isPreNext","transform","backgroundImage","Player","profileLikes","SidebarButton_SidebarButton","Sidebar_Sidebar","TrackImages_TrackImages","TrackInfo_TrackInfo","Progress_Progress","AudioPlayer_AudioPlayer","PlayerControls_PlayerControls","Playlist_Playlist","App","Player_Player","ReactDOM","components_App","document","querySelector"],"mappings":"mRASaA,GAAbC,EAAA,WAYE,SAAAD,IAAwE,IAAAE,EAAAC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAAtDG,EAA0DJ,EAA1DI,OAAQC,EAAkDL,EAAlDK,QAASC,EAAyCN,EAAzCM,OAAyCC,OAAAC,EAAA,EAAAD,CAAAE,KAAAX,GAAAS,OAAAG,EAAA,EAAAH,CAAAE,KAAA,UAAAE,EAAAF,MAAAF,OAAAG,EAAA,EAAAH,CAAAE,KAAA,WAAAG,EAAAH,MAAAF,OAAAG,EAAA,EAAAH,CAAAE,KAAA,UAAAI,EAAAJ,MAAAF,OAAAG,EAAA,EAAAH,CAAAE,KAAA,SAAAK,EAAAL,MAAAF,OAAAG,EAAA,EAAAH,CAAAE,KAAA,SAAAM,EAAAN,MAAAF,OAAAG,EAAA,EAAAH,CAAAE,KAAA,QAAAO,EAAAP,MAAAF,OAAAG,EAAA,EAAAH,CAAAE,KAAA,SAAAQ,EAAAR,MAAAF,OAAAG,EAAA,EAAAH,CAAAE,KAAA,iBAAAS,EAAAT,MAAAF,OAAAG,EAAA,EAAAH,CAAAE,KAAA,iCAAAU,EAAAV,MAAAF,OAAAG,EAAA,EAAAH,CAAAE,KAAA,kBAAAW,EAAAX,MAChD,kBAAXL,IACTK,KAAKL,OAASA,GAGO,mBAAZC,IACTI,KAAKJ,QAAUA,GAGK,mBAAXC,IACTG,KAAKH,OAASA,GAtBpB,OAAAC,OAAAc,EAAA,EAAAd,CAAAT,EAAA,EAAAwB,IAAA,SAAAC,IAAA,WA4BI,OAAOd,KAAKe,SA5BhBC,IAAA,SA+BarB,GAEPK,KAAKe,QADHpB,EAAS,EACI,EACNA,EAAS,EACH,EAEAA,MArCrBN,EAAA,GAAAa,EAAAJ,OAAAmB,EAAA,EAAAnB,CAAAR,EAAA4B,UAAA,WACGC,KADH,CAAAC,cAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,YAAA,iBACwC,MADxCpB,EAAAL,OAAAmB,EAAA,EAAAnB,CAAAR,EAAA4B,UAAA,YAEGC,KAFH,CAAAC,cAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,YAAA,kBAEwC,KAFxCnB,EAAAN,OAAAmB,EAAA,EAAAnB,CAAAR,EAAA4B,UAAA,WAGGC,KAHH,CAAAC,cAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,YAAA,kBAGwC,KAHxClB,EAAAP,OAAAmB,EAAA,EAAAnB,CAAAR,EAAA4B,UAAA,UAIGC,KAJH,CAAAC,cAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,YAAA,kBAIuC,KAJvCjB,EAAAR,OAAAmB,EAAA,EAAAnB,CAAAR,EAAA4B,UAAA,UAKGC,KALH,CAAAC,cAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,YAAA,kBAKuC,KALvChB,EAAAT,OAAAmB,EAAA,EAAAnB,CAAAR,EAAA4B,UAAA,SAMGC,KANH,CAAAC,cAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,YAAA,kBAM2C,QAN3Cf,EAAAV,OAAAmB,EAAA,EAAAnB,CAAAR,EAAA4B,UAAA,UAOGC,KAPH,CAAAC,cAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,YAAA,iBAOuC,MAPvCd,EAAAX,OAAAmB,EAAA,EAAAnB,CAAAR,EAAA4B,UAAA,kBAQGC,KARH,CAAAC,cAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,YAAA,kBAQ+C,KAR/Cb,EAAAZ,OAAAmB,EAAA,EAAAnB,CAAAR,EAAA4B,UAAA,kCASGC,KATH,CAAAC,cAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,YAAA,kBAS+D,KAT/DZ,EAAAb,OAAAmB,EAAA,EAAAnB,CAAAR,EAAA4B,UAAA,mBAUGC,KAVH,CAAAC,cAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,YAAA,kBAUgD,KAVhDzB,OAAAmB,EAAA,EAAAnB,CAAAR,EAAA4B,UAAA,UA0BGM,KA1BH1B,OAAA2B,yBAAAnC,EAAA4B,UAAA,UAAA5B,EAAA4B,WAAA5B,GA0CIoC,EAAmC,GAEvC,IACE,IAAMC,EAAOC,aAAaC,QAAQ,uBAElC,GAAIF,EAAM,CACR,IAAMG,EAAOC,KAAKC,MAAML,GAExBD,EAAO9B,QAAUkC,EAAKlC,QACtB8B,EAAO7B,OAASiC,EAAKjC,OACrB6B,EAAO/B,OAASmC,EAAKnC,QAEvB,MAAOsC,KAEF,IAAMC,EAAQ,IAAI7C,EAAYqC,WCgD/BS,EAAuB,CAC3BC,KAAM,WACNC,KAAM,OACNC,KAAM,WACNC,KAAM,QACNC,IAAK,SACLC,IAAK,QACLC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QAGP,SAASC,EAASC,EAAaC,GAC7B,OAAIA,EAEAD,EACA,IACAjD,OAAOmD,KAAKD,GACTE,IAAI,SAACC,GACJ,SAAAC,OAAUD,EAAV,KAAAC,OAAmBC,mBAAmBL,EAAOG,OAE9CG,KAAK,KAGHP,WAIIjC,iFAAf,SAAAyC,EAAmBR,EAAaC,GAAhC,IAAAQ,EAAA7B,EAAA,OAAA8B,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACyBC,MAAMjB,EAASC,EAAKC,IAD7C,cACQQ,EADRI,EAAAI,KAAAJ,EAAAE,KAAA,EAEqBN,EAAS7B,OAF9B,cAEQA,EAFRiC,EAAAI,KAAAJ,EAAAK,OAAA,SAIStC,GAJT,wBAAAiC,EAAAM,SAAAX,sCAOeY,+EAAf,SAAAC,EAA8BC,GAA9B,OAAAZ,EAAAC,EAAAC,KAAA,SAAAW,GAAA,cAAAA,EAAAT,KAAAS,EAAAR,MAAA,cAAAQ,EAAAT,KAAA,EAAAS,EAAAR,KAAA,EAEiBhD,EAAG,qCAAuC,CACrDyD,UAAWC,mCACXzB,IAAKsB,IAJX,cAAAC,EAAAL,OAAA,SAAAK,EAAAN,MAAA,aAAAM,EAAAT,KAAA,EAAAS,EAAAG,GAAAH,EAAA,SAOU,IAAII,MAAM,2CAPpB,wBAAAJ,EAAAJ,SAAAE,EAAA,iDAWeO,iFAAf,SAAAC,EACEC,EACAC,GAFF,IAAAC,EAAAvB,EAAA,OAAAC,EAAAC,EAAAC,KAAA,SAAAqB,GAAA,cAAAA,EAAAnB,KAAAmB,EAAAlB,MAAA,cAIMiB,EAAkB,GAJxBC,EAAAlB,KAAA,EAMsChD,EAAG,uCAAAsC,OACEyB,EAAQI,GADV,UAErC,CACEC,OAAQ,OACRC,MAAO,GACPC,KAAMC,KAAKC,MACXf,UAAWC,mCACXe,oBAAqB,IAb3B,OAMM/B,EANNwB,EAAAhB,KAAA,WAiBSR,EAASgC,UAjBlB,CAAAR,EAAAlB,KAAA,gBAkBIiB,EAASA,EAAO3B,OAAOqC,EAAejC,EAASkC,aAE3CZ,GACFA,EAAiBC,GArBvBC,EAAAlB,KAAA,EAwBqBhD,EAAI0C,EAASgC,WAxBlC,OAwBIhC,EAxBJwB,EAAAhB,KAAAgB,EAAAlB,KAAA,uBA2BEiB,EAASA,EAAO3B,OAAOqC,EAAejC,EAASkC,aA3BjDV,EAAAf,OAAA,SA6BSc,GA7BT,yBAAAC,EAAAd,SAAAU,6BAgCA,SAASa,EAAeV,GAItB,OAHgBA,EACbY,OAAO,SAAAC,GAAK,OAAoB,OAAhBA,EAAMA,QACtB1C,IAAI,SAAA0C,GAAK,OAId,SAAuBC,GACrB,IAAMD,EAAQC,EAAUD,MAExB,OAAO9F,OAAAgG,EAAA,EAAAhG,CAAA,GACF8F,EADL,CAEEG,YAAaC,EAAWJ,EAAOzD,EAAUC,MACzC6D,WACEL,EAAMK,WAAa,gDAXPC,CAAcN,KAehC,SAASI,EAAWJ,EAAcO,GAChC,OAA0B,OAAtBP,EAAMG,YACDH,EAAMG,YAAYK,QAAQ,QAASD,GACP,OAA1BP,EAAMS,KAAKC,WAChBV,EAAMS,KAAKC,WAAWC,SAAS,kBACD,eAEzBX,EAAMS,KAAKC,WAAWF,QAAQ,QAASD,GAI3C,GAGT,IAAIK,EAAyB,GAetB,SAAS1C,EACdiB,EACAa,EACAhG,GA2BA,OAAIA,EAVoB,WACtB,IAAM6G,EAlCH,SAASC,EACd3B,EACA4B,GAEA,IAAIF,EAAa1B,EAAO6B,KAAKC,MAAMD,KAAKE,SAAW/B,EAAOtF,SAE1D,OAAIsF,EAAOtF,OAAS,GAAKkH,GAAgBF,EAAWxB,KAAO0B,EAAa1B,GAC/DyB,EAAe3B,EAAQ4B,GAGzBF,EAwBcC,CAAe3B,EAAQa,GAM1C,OAJIa,GACFD,EAAcO,KAAKN,GAGdA,GAAc,KAIdO,GA1Ba,WACpB,GAAIpB,EAAO,CACT,IAAMqB,EAAUrB,EAAMX,GAChBiC,EAAanC,EAAOoC,UAAU,SAAAvB,GAAK,OAAIA,EAAMX,KAAOgC,IAE1D,GAAIC,EAAanC,EAAOtF,OAAS,EAC/B,OAAOsF,EAAOmC,EAAa,IAAM,KAC5B,GAAInC,EAAOtF,OAAS,EACzB,OAAOsF,EAAO,IAAM,KAIxB,OAAO,KAgBAqC,GAIJ,SAASvD,EACdkB,EACAa,EACAhG,GAEA,IAAMyH,EAAgB,WACpB,GAAIzB,EAAO,CACT,IAAMqB,EAAUrB,EAAMX,GAChBiC,EAAanC,EAAOoC,UAAU,SAAAvB,GAAK,OAAIA,EAAMX,KAAOgC,IAE1D,GAAIC,EAAa,EACf,OAAOnC,EAAOmC,EAAa,IAAM,KAC5B,GAAInC,EAAOtF,OAAS,EACzB,OAAOsF,EAAOA,EAAOtF,OAAS,IAAM,KAIxC,OAAO,MAGT,OAAIG,GACE4G,EAAc/G,OAAS,GACzB+G,EAAcc,MACPd,EAAcc,OAAS,MAKzBD,UAIUE,2NAEXxC,EAAsByC,EAAQ,sBAE7B/B,EAAeV,8KAItBV,EACAS,2FAE+BX,EAAeE,iBAAxCQ,kBACwBF,EAAgBE,EAASC,iBAAjDC,2BAECA,qHCnTU0C,cAQnB,SAAAA,EAAYC,EAA2BC,GAA2B,IAAAC,EAAA,OAAA9H,OAAAC,EAAA,EAAAD,CAAAE,KAAAyH,IAChEG,EAAA9H,OAAA+H,EAAA,EAAA/H,CAAAE,KAAAF,OAAAgI,EAAA,EAAAhI,CAAA2H,GAAAM,KAAA/H,KAAM0H,EAAOC,KAOfK,OAAS,WACP,IAAIC,EAAY,UAEZL,EAAKF,MAAMO,YACbA,GAAS,IAAA7E,OAAQwE,EAAKF,MAAMO,YAG1BL,EAAKF,MAAMQ,SACbD,GAAS,cAGX,IAAIE,EAA0B,GAmB9B,OAjBIP,EAAKF,MAAMS,SACbA,EACEC,EAAA1E,EAAA2E,cAACC,EAAA,EAAD,CACEC,GAAIX,EAAKD,MAAMa,SACfC,WAAW,SACXC,QAAS,IACTC,UAAW,WACTf,EAAKgB,SAAS,CACZJ,UAAU,MAIdJ,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,aAMnBG,EAAA1E,EAAA2E,cAAA,OACEJ,UAAWA,EACXY,mBAAoB,SAACC,GACnBA,EAAEC,iBAEFnB,EAAKgB,SAAS,CACZJ,UAAU,KAGdQ,oBAAqB,SAACF,GACpBA,EAAEC,iBAEFnB,EAAKgB,SAAS,CACZJ,UAAU,KAGdS,iBAAkB,SAACH,GACjBA,EAAEC,iBAEEnB,EAAKF,MAAMwB,QACbtB,EAAKF,MAAMwB,UAGfC,kBAAmB,SAACL,GAClBA,EAAEC,iBAEEnB,EAAKF,MAAMwB,QACbtB,EAAKF,MAAMwB,WAIdf,EACAP,EAAKF,MAAM0B,WApEhBxB,EAAKD,MAAQ,CACXa,UAAU,GAJoDZ,6BARzByB,aAAtB5B,EAIZ6B,aAAe,CACpBnB,QAAQ,8BCdSoB,GADpBC,+LAGG,OACEpB,EAAA1E,EAAA2E,cAACoB,EAAD,CACExB,UAAU,iBACVC,OAAQhG,EAAMwH,gBACdR,OAAQ,WACNhH,EAAMwH,iBAAmBxH,EAAMwH,kBAGjCtB,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,gBACfG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,gBACfG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,wBAZoBoB,6ECYtBM,eAOnB,SAAAA,EAAYjC,EAAwBC,GAAwB,IAAAC,EAAA,OAAA9H,OAAAC,EAAA,EAAAD,CAAAE,KAAA2J,IAC1D/B,EAAA9H,OAAA+H,EAAA,EAAA/H,CAAAE,KAAAF,OAAAgI,EAAA,EAAAhI,CAAA6J,GAAA5B,KAAA/H,KAAM0H,EAAOC,KAJfiC,gBAG4D,EAAAhC,EAF5DiC,gBAE4D,EAAAjC,EAW5DkC,YAAc,SAAChB,GACblB,EAAKgB,SAAS,CACZmB,MAAOnC,EAAKF,MAAMqC,MAClBC,UAAU,IAGRpC,EAAKF,MAAMuC,SACbrC,EAAKF,MAAMuC,QAAQrC,EAAKD,MAAMoC,QAlB0BnC,EAsB5DsC,WAAa,SAACpB,GACZlB,EAAKgB,SAAS,CACZoB,UAAU,IAGRpC,EAAKF,MAAMyC,OACbvC,EAAKF,MAAMyC,MAAMvC,EAAKD,MAAMoC,QA5B4BnC,EAgC5DI,OAAS,WACP,IAAI4B,EAAahC,EAAKF,MAAMqC,MAExBnC,EAAKD,MAAMqC,WACbJ,EAAahC,EAAKD,MAAMoC,OAG1B,IAAMF,EAAcD,EAAahC,EAAKF,MAAM0C,IAAO,IAE/CnC,EAAY,cAMhB,OAJIL,EAAKF,MAAMO,YACbA,GAAa,IAAML,EAAKF,MAAMO,WAI9BG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAWA,GACdG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,mBACbG,EAAA1E,EAAA2E,cAAA,OACEJ,UAAU,oBACVoC,MAAO,CAAEC,MAAK,GAAAlH,OAAKyG,EAAL,SAGlBzB,EAAA1E,EAAA2E,cAAA,SACEJ,UAAU,gBACVsC,KAAK,QACLR,MAAOH,EACPY,IAAK5C,EAAKF,MAAM8C,IAChBJ,IAAKxC,EAAKF,MAAM0C,IAChBK,KAAM7C,EAAKF,MAAM+C,KACjBC,SAAU,SAAA5B,GACR,IAAMiB,EAAQY,WAAW7B,EAAE8B,OAAOb,OAElCnC,EAAKgB,SAAS,CACZmB,UAGEnC,EAAKF,MAAMgD,UACb9C,EAAKF,MAAMgD,SAASX,IAGxBlB,mBAAoB,SAAAC,GAClBlB,EAAKkC,YAAYhB,IAEnBE,oBAAqB,SAAAF,GACnBlB,EAAKkC,YAAYhB,IAEnBG,iBAAkB,SAAAH,GAChBlB,EAAKsC,WAAWpB,IAElBK,kBAAmB,SAAAL,GACjBlB,EAAKsC,WAAWpB,QAjFxBlB,EAAKgC,WAAa,EAClBhC,EAAKiC,WAAa,EAElBjC,EAAKD,MAAQ,CACXoC,MAAOnC,EAAKF,MAAMqC,MAClBC,UAAU,GAP8CpC,6BAPtByB,aCRnBwB,GADpBrB,yNAECsB,aAAeC,KAAS,SAACpL,GACvBuC,EAAMvC,OAASA,GACd,4EAEM,IAAAqL,EAAAhL,KACHiI,EAAY,UACZgD,EAAkB,SAUtB,OARI/I,EAAMwH,kBACRzB,GAAa,cAGM,IAAjB/F,EAAMvC,SACRsL,GAAmB,aAInB7C,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAWA,GACdG,EAAA1E,EAAA2E,cAAA,OACEJ,UAAU,eACViD,QAAS,WACPhJ,EAAMwH,iBAAkB,KAG5BtB,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,mBACbG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,kBACbG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,WACbG,EAAA1E,EAAA2E,cAAA,OACEJ,UAAU,gBACVkD,IAA8B,eAC9BC,IAAI,GACJd,MAAM,KACNe,OAAO,OAETjD,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,gBACbG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,gBAAf,QACAG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,iBAAf,2BAING,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,oBACbG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAWgD,GACd7C,EAAA1E,EAAA2E,cAACoB,EAAD,CACExB,UAAU,gBACViB,OAAQ,WACNhH,EAAMvC,OAAS,GAEjBwI,QAAQ,GAERC,EAAA1E,EAAA2E,cAACiD,GAAA5H,EAAD,CAAUuE,UAAU,0BACpBG,EAAA1E,EAAA2E,cAACkD,GAAA7H,EAAD,CAAYuE,UAAU,6BAExBG,EAAA1E,EAAA2E,cAACmD,GAAD,CACEhB,IAAK,EACLJ,IAAK,EACLK,KAAM,IACNV,MAAO7H,EAAMvC,OACb+K,SAAU,SAAA/K,GAAM,OAAIqL,EAAKF,aAAanL,iBA1DjB0J,iBCVhBoC,gHACIC,GACrB,IAAMC,EAAI/E,KAAKC,MAAM6E,EAAI,IAAO,MAC1BE,EAAIhF,KAAKC,OAAO6E,EAAQ,IAAJC,EAAW,MAAQ,IAAO,IAC9CE,EAAIjF,KAAKC,MAAO6E,EAAI,IAAQ,IAE5BI,EAAO,GAWb,OATIH,EAAI,GACNG,EAAK/E,KAAK4E,GACVG,EAAK/E,KAAK6E,EAAI,GAAKA,EAAI,IAAMA,IAE7BE,EAAK/E,KAAK6E,GAGZE,EAAK/E,KAAK8E,EAAI,GAAKA,EAAI,IAAMA,GAEtBC,EAAKxI,KAAK,cCLAyI,GADpBvC,gMAGG,IAAM5D,EAAyB,CAC7BoG,MAAO9J,EAAM0D,MAAQ1D,EAAM0D,MAAMoG,MAAQ,WACzC3F,KAAMnE,EAAM0D,MAAQ1D,EAAM0D,MAAMS,KAAK4F,SAAW,UAChDC,SAAUhK,EAAM0D,MAAQ1D,EAAM0D,MAAMsG,SAAW,GAGjD,OACE9D,EAAA1E,EAAA2E,cAAA,OACEJ,UAAU,aACViD,QAAS,WACPhJ,EAAMiK,gBAAkBjK,EAAMiK,iBAGhC/D,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,uBACbG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,SACfG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,SACfG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,UAEjBG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,eAAerC,EAAMoG,OACpC5D,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,cAAcrC,EAAMS,MACnC+B,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,cACbG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,gBAAf,QACAG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,aAAf,KACAG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,oBACZwD,GAAMW,gBAAgBxG,EAAMsG,oBA1BF7C,kBCLlBgD,GADpB7C,0NAEC8C,eAAiBvB,KAAS,SAACwB,GACzBrK,EAAMqK,SAAWA,EACjBrK,EAAMsK,gCAAiC,GACtC,+EAES1D,GACV9I,KAAK4I,SAAS,CACZoB,UAAU,uCAIHlB,GACT,IAAMyD,EAAWE,SAAU3D,EAAE8B,OAA4Bb,OAEzD/J,KAAK4I,SAAS,CACZoB,UAAU,IAGZhK,KAAKsM,eAAeC,oCAGb,IAAAvB,EAAAhL,KACDoK,EAAMlI,EAAM0D,MAAQ1D,EAAM0D,MAAMsG,SAAW,EAEjD,OACE9D,EAAA1E,EAAA2E,cAACmD,GAAD,CACEvD,UAAU,WACVuC,IAAK,EACLJ,IAAKA,EACLK,KAAM,EACNV,MAAO7H,EAAMqK,SACbpC,MAAO,SAAAJ,GAAK,OAAIiB,EAAKsB,eAAevC,aAhCNV,kBCKjBqD,GADpBlD,2BAOC,SAAAkD,EAAYhF,EAA0BC,GAA0B,IAAAC,EAAA,OAAA9H,OAAAC,EAAA,EAAAD,CAAAE,KAAA0M,IAC9D9E,EAAA9H,OAAA+H,EAAA,EAAA/H,CAAAE,KAAAF,OAAAgI,EAAA,EAAAhI,CAAA4M,GAAA3E,KAAA/H,KAAM0H,EAAOC,KAHfgF,WAEgE,EAG9D/E,EAAK+E,MAAQ,IAAIC,MAEjBhF,EAAK+E,MAAMhN,OAASuC,EAAMvC,OAC1BiI,EAAK+E,MAAME,YAAc,EAEzBC,YACE,kBAAM5K,EAAMvC,QACZ,SAAAA,GACEiI,EAAK+E,MAAMhN,OAASA,IAIxBmN,YACE,kBAAM5K,EAAM6K,QADN,eAAAxN,EAAAO,OAAAkN,EAAA,EAAAlN,CAAA2D,EAAAC,EAAAuJ,KAEN,SAAAC,EAAMH,GAAN,OAAAtJ,EAAAC,EAAAC,KAAA,SAAAwJ,GAAA,cAAAA,EAAAtJ,KAAAsJ,EAAArJ,MAAA,WACMiJ,EADN,CAAAI,EAAArJ,KAAA,eAAAqJ,EAAArJ,KAAA,EAEU8D,EAAK+E,MAAMS,QAFrB,OAAAD,EAAArJ,KAAA,uBAAAqJ,EAAAtJ,KAAA,EAAAsJ,EAAArJ,KAAA,EAKY8D,EAAK+E,MAAMU,OALvB,OAAAF,EAAArJ,KAAA,iBAAAqJ,EAAAtJ,KAAA,GAAAsJ,EAAA1I,GAAA0I,EAAA,SAOMG,QAAQC,IAARJ,EAAA1I,IAPN,yBAAA0I,EAAAjJ,SAAAgJ,EAAA,kBAFM,gBAAAM,GAAA,OAAAjO,EAAAkO,MAAAzN,KAAAR,YAAA,IAeRsN,YACE,kBAAM5K,EAAM0D,OACZ,SAACA,GACKA,IACFgC,EAAK+E,MAAMxB,IAAMvF,EAAMK,cAK7B6G,YACE,kBAAM5K,EAAMsK,gCACZ,SAAAA,GACMA,IACF5E,EAAK+E,MAAME,YAAc3K,EAAMqK,SAAW,IAC1CrK,EAAMsK,gCAAiC,KA5CiB5E,mFAkD5C,IAAAoD,EAAAhL,KAClBA,KAAK2M,MAAMe,iBAAiB,QAAS,SAACzL,GAChC+I,EAAK2B,OAASzK,EAAM0D,QACtBoF,EAAK2B,MAAMxB,IAAMjJ,EAAM0D,MAAMK,cAIjCjG,KAAK2M,MAAMe,iBAAiB,UAA5B5N,OAAAkN,EAAA,EAAAlN,CAAA2D,EAAAC,EAAAuJ,KAAuC,SAAAU,IAAA,OAAAlK,EAAAC,EAAAC,KAAA,SAAAiK,GAAA,cAAAA,EAAA/J,KAAA+J,EAAA9J,MAAA,UAChC5B,EAAM6K,OAD0B,CAAAa,EAAA9J,KAAA,eAAA8J,EAAA/J,KAAA,EAAA+J,EAAA9J,KAAA,EAG3BkH,EAAK2B,MAAMU,OAHgB,OAAAO,EAAA9J,KAAA,eAAA8J,EAAA/J,KAAA,EAAA+J,EAAAnJ,GAAAmJ,EAAA,SAKjCN,QAAQO,KAARD,EAAAnJ,IALiC,wBAAAmJ,EAAA1J,SAAAyJ,EAAA,kBAUvC3N,KAAK2M,MAAMe,iBAAiB,YAA5B5N,OAAAkN,EAAA,EAAAlN,CAAA2D,EAAAC,EAAAuJ,KAAyC,SAAA1J,IAAA,OAAAE,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAClC5B,EAAM6K,OAD4B,CAAAnJ,EAAAE,KAAA,eAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAG7BkH,EAAK2B,MAAMU,OAHkB,OAAAzJ,EAAAE,KAAA,eAAAF,EAAAC,KAAA,EAAAD,EAAAa,GAAAb,EAAA,SAKnC0J,QAAQO,KAARjK,EAAAa,IALmC,wBAAAb,EAAAM,SAAAX,EAAA,kBAUzCvD,KAAK2M,MAAMe,iBACT,aACA3C,KAAS,WACP7I,EAAMqK,SAAoC,IAAzBvB,EAAK2B,MAAME,aAC3B,KAGL7M,KAAK2M,MAAMe,iBAAiB,QAAS,WACnC,GAAKxL,EAAMrC,OASLqC,EAAM0D,QACR1D,EAAMqK,SAAW,EACjBrK,EAAMsK,gCAAiC,OAXxB,CACjB,IAAM5G,EAAQ9B,EAAK5B,EAAM6C,OAAQ7C,EAAM0D,MAAO1D,EAAMtC,SAEhDgG,IACF1D,EAAM0D,MAAQA,EACd1D,EAAMqK,SAAW,EACjBrK,EAAMsK,gCAAiC,uCAY7C,OAAO,YA7G8BnD,8JCEpByE,GADpBtE,oMAGGtH,EAAM6K,QAAU7K,EAAM6K,+CAItB7K,EAAMtC,SAAWsC,EAAMtC,+CAIvBsC,EAAMrC,QAAUqC,EAAMrC,2CAItB,IAAM+F,EAAQ/B,EAAK3B,EAAM6C,OAAQ7C,EAAM0D,MAAO1D,EAAMtC,SAEhDgG,IACF1D,EAAM0D,MAAQA,EACd1D,EAAMqK,SAAW,uCAKnB,IAAM3G,EAAQ9B,EAAK5B,EAAM6C,OAAQ7C,EAAM0D,MAAO1D,EAAMtC,SAEhDgG,IACF1D,EAAM0D,MAAQA,EACd1D,EAAMqK,SAAW,oCAIZ,IAAA3E,EAAA5H,KACDyI,EAAa,CACjB7I,QAAO,0BACPiE,KAAI,uBACJwJ,KAAI,uBACJvJ,KAAI,uBACJjE,OAAM,0BAOR,OAJA4I,EAAW4E,MAASnL,EAAM6K,OAAwB,GAAf,aACnCtE,EAAW7I,SAAWsC,EAAMtC,QAAU,aAAe,GACrD6I,EAAW5I,QAAUqC,EAAMrC,OAAS,aAAe,GAGjDuI,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,mBACbG,EAAA1E,EAAA2E,cAACoB,EAAD,CACExB,UAAU,kBACVC,OAAQhG,EAAMtC,QACdsJ,OAAQ,WACNtB,EAAKmG,kBAGP3F,EAAA1E,EAAA2E,cAAC2F,GAAAtK,EAAD,CAASuE,UAAU,+BAGrBG,EAAA1E,EAAA2E,cAACoB,EAAD,CACExB,UAAWQ,EAAW5E,KACtBqF,OAAQ,WACNtB,EAAKqG,cAGP7F,EAAA1E,EAAA2E,cAAC6F,GAAAxK,EAAD,CAAcuE,UAAU,4BAG1BG,EAAA1E,EAAA2E,cAACoB,EAAD,CACExB,UAAU,eACVC,QAAShG,EAAM6K,OACf7D,OAAQ,WACNtB,EAAKuG,cAEPhG,QAAQ,GAERC,EAAA1E,EAAA2E,cAAC+F,GAAA1K,EAAD,CAAWuE,UAAU,2BACrBG,EAAA1E,EAAA2E,cAACgG,GAAA3K,EAAD,CAAOuE,UAAU,6BAGnBG,EAAA1E,EAAA2E,cAACoB,EAAD,CACExB,UAAWQ,EAAW3E,KACtBoF,OAAQ,WACNtB,EAAK0G,cAGPlG,EAAA1E,EAAA2E,cAACkG,GAAA7K,EAAD,CAAUuE,UAAU,4BAGtBG,EAAA1E,EAAA2E,cAACoB,EAAD,CACExB,UAAU,iBACVC,OAAQhG,EAAMrC,OACdqJ,OAAQ,WACNtB,EAAK4G,iBAGPpG,EAAA1E,EAAA2E,cAACoG,GAAA/K,EAAD,CAAQuE,UAAU,sCAClBG,EAAA1E,EAAA2E,cAACqG,GAAAhL,EAAD,CAAWuE,UAAU,6CA9FaoB,kBCJvBsF,GADpBnF,2BAIC,SAAAmF,EAAYjH,GAAY,IAAAE,EAAA,OAAA9H,OAAAC,EAAA,EAAAD,CAAAE,KAAA2O,IACtB/G,EAAA9H,OAAA+H,EAAA,EAAA/H,CAAAE,KAAAF,OAAAgI,EAAA,EAAAhI,CAAA6O,GAAA5G,KAAA/H,KAAM0H,KAHRkH,cAEwB,EAGtBhH,EAAKgH,SAAW,KAEhB9B,YACE,kBAAM5K,EAAM0D,OACZ,WACEgC,EAAKiH,kBARajH,yEAadhC,GACH1D,EAAM0D,OAAS1D,EAAM0D,MAAMX,KAAOW,EAAMX,GAI3C/C,EAAM6K,QAAU7K,EAAM6K,QAHtB7K,EAAM0D,MAAQA,EACd1D,EAAM6K,QAAS,2CAOjB,GAAI/M,KAAK4O,SAAU,CACjB,IAEME,EADc,GADT5M,EAAM6C,OAAOoC,UAAU,SAAAvB,GAAK,OAAIA,IAAU1D,EAAM0D,QAGtC5F,KAAK4O,SAASG,aAAe,EAAIC,GAEtDhP,KAAK4O,SAASK,SAAS,CACrBH,IAAKA,EACLI,SAAU,6CAKP,IAAAlE,EAAAhL,KACP,OACEoI,EAAA1E,EAAA2E,cAAA,OACEJ,UAAU,WACVkH,IAAK,SAAAA,GACHnE,EAAK4D,SAAWO,IAGlB/G,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,eACZ/F,EAAM6C,OAAO7B,IAAI,SAAC0C,EAAOX,GACxB,IAAIgD,EAAoB,aACpBmH,EAAwB,EAc5B,OAZIlN,EAAM0D,OAASA,EAAMX,KAAO/C,EAAM0D,MAAMX,KAC1CgD,GAAa,cAEQ,IAAjB/F,EAAM6K,SACR9E,GAAa,eAGX/F,EAAMqK,SAAW,IACnB6C,EAAiBlN,EAAMqK,SAAWrK,EAAM0D,MAAMsG,SAAY,MAK5D9D,EAAA1E,EAAA2E,cAAA,OACEJ,UAAWA,EACXpH,IAAG,cAAAuC,OAAgB6B,GACnBiG,QAAS,kBAAMF,EAAKqE,UAAUzJ,KAE9BwC,EAAA1E,EAAA2E,cAAA,OACEJ,UAAU,iBACVoC,MAAO,CAAEC,MAAK,GAAAlH,OAAKgM,EAAL,QAEhBhH,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,cACbG,EAAA1E,EAAA2E,cAAC+F,GAAA1K,EAAD,CAAWuE,UAAU,cACrBG,EAAA1E,EAAA2E,cAACgG,GAAA3K,EAAD,CAAOuE,UAAU,gBAEnBG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,cACbG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,eAAerC,EAAMoG,OACpC5D,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,cAAcrC,EAAMS,KAAK4F,WAE1C7D,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAU,kBACZwD,GAAMW,gBAAgBxG,EAAMsG,uBAnFT7C,kBCejBiG,GADpB9F,2BAOC,SAAA8F,EAAY5H,EAAyBC,GAAyB,IAAAC,EAAA9H,OAAAC,EAAA,EAAAD,CAAAE,KAAAsP,IAC5D1H,EAAA9H,OAAA+H,EAAA,EAAA/H,CAAAE,KAAAF,OAAAgI,EAAA,EAAAhI,CAAAwP,GAAAvH,KAAA/H,KAAM0H,EAAOC,KAHf4H,OAA6B,KAEiC3H,EAqD9D4H,cAAgB,SAACC,EAAWC,GAC1B9H,EAAKgB,SAAS,CACZ+G,YAAY,EAEZC,aAAc,CACZH,EAAGA,EACHC,EAAGA,GAGLG,QAAS,CACPJ,EAAGA,EACHC,EAAGA,GAGLzB,UAAWpK,EAAK3B,EAAM6C,OAAQ7C,EAAM0D,MAAO1D,EAAMtC,SAEjD0O,UAAWxK,EAAK5B,EAAM6C,OAAQ7C,EAAM0D,MAAO1D,EAAMtC,YArESgI,EAyE9DkI,YAAc,WACZ,GAAIlI,EAAKD,MAAMgI,WAAY,CACzB,IAAMI,EAAOnI,EAAKD,MAAMkI,QAAQJ,EAAI7H,EAAKD,MAAMiI,aAAaH,EAExD7I,KAAKoJ,IAAID,GAAQ,KAEjB7N,EAAM0D,MADJmK,EAAO,EACKnI,EAAKD,MAAM2G,UAEX1G,EAAKD,MAAMsG,WAI7BrG,EAAKgB,SAAS,CACZ+G,YAAY,MAtF4C/H,EA2F9DqI,cAAgB,SAACR,EAAWC,GACtB9H,EAAKD,MAAMgI,YACb/H,EAAKgB,SAAS,CACZiH,QAAS,CACPJ,EAAGA,EACHC,EAAGA,MA7FT,IAAMzB,EAAYpK,EAAK3B,EAAM6C,OAAQ7C,EAAM0D,MAAO1D,EAAMtC,SAClDsQ,EAAerM,EAAK3B,EAAM6C,OAAQkJ,EAAW/L,EAAMtC,SACnD0O,EAAYxK,EAAK5B,EAAM6C,OAAQ7C,EAAM0D,MAAO1D,EAAMtC,SAClDuQ,EAAerM,EAAK5B,EAAM6C,OAAQuJ,EAAWpM,EAAMtC,SANG,OAQ5DgI,EAAKD,MAAQ,CACXgI,YAAY,EACZC,aAAc,CAAEH,EAAG,EAAGC,EAAG,GACzBG,QAAS,CAAEJ,EAAG,EAAGC,EAAG,GACpBzB,YACAiC,eACA5B,YACA6B,gBAGFrD,YACE,kBAAM5K,EAAM6C,QACZ,SAAAA,GACE,IAAMkJ,EAAYpK,EAAKkB,EAAQ7C,EAAM0D,MAAO1D,EAAMtC,SAC5CsQ,EAAerM,EAAKkB,EAAQkJ,EAAW/L,EAAMtC,SAC7C0O,EAAYxK,EAAKiB,EAAQ7C,EAAM0D,MAAO1D,EAAMtC,SAC5CuQ,EAAerM,EAAKiB,EAAQuJ,EAAWpM,EAAMtC,SAEnDgI,EAAKgB,SAAS,CACZqF,YACAiC,eACA5B,YACA6B,mBAKNrD,YACE,kBAAM5K,EAAM0D,OACZ,SAAAA,GACE,IAAMqI,EAAYpK,EAAK3B,EAAM6C,OAAQa,EAAO1D,EAAMtC,SAC5CsQ,EAAerM,EAAK3B,EAAM6C,OAAQkJ,EAAW/L,EAAMtC,SACnD0O,EAAYxK,EAAK5B,EAAM6C,OAAQa,EAAO1D,EAAMtC,SAC5CuQ,EAAerM,EAAK5B,EAAM6C,OAAQuJ,EAAWpM,EAAMtC,SAEzDgI,EAAKgB,SAAS,CACZqF,YACAiC,eACA5B,YACA6B,mBA/CsDvI,wEAsGrD,IAAAoD,EAAAhL,KACHiI,EAAY,eAMhB,OAJIjI,KAAK2H,MAAMgI,aACb1H,GAAa,kBAIbG,EAAA1E,EAAA2E,cAAA,OACEJ,UAAWA,EACXuH,cAAe,SAAA1G,GACbA,EAAEC,iBACFiC,EAAKwE,cAAc1G,EAAEsH,QAAStH,EAAEuH,UAElCP,YAAa,SAAAhH,GACXA,EAAEC,iBACFiC,EAAK8E,eAEPQ,eAAgB,SAAAxH,GACdA,EAAEC,iBACFiC,EAAK8E,eAEPG,cAAe,SAAAnH,GACbA,EAAEC,iBACFiC,EAAKiF,cAAcnH,EAAEsH,QAAStH,EAAEuH,WAGjCnO,EAAM6C,OAAO7B,IAAI,SAAC0C,EAAOX,GACxB,IAAIgD,EAAY,cACZoC,EAAQ,GACNkG,EACY,OAAhBrO,EAAM0D,OAAkB1D,EAAM0D,MAAMX,KAAOW,EAAMX,GAE7CuL,EACqB,OAAzBxF,EAAKrD,MAAMsG,WACXjD,EAAKrD,MAAMsG,UAAUhJ,KAAOW,EAAMX,GAE9BwL,EACwB,OAA5BzF,EAAKrD,MAAMuI,cACXlF,EAAKrD,MAAMuI,aAAajL,KAAOW,EAAMX,GAEjCyL,EACqB,OAAzB1F,EAAKrD,MAAM2G,WACXtD,EAAKrD,MAAM2G,UAAUrJ,KAAOW,EAAMX,GAE9B0L,EACwB,OAA5B3F,EAAKrD,MAAMwI,cACXnF,EAAKrD,MAAMwI,aAAalL,KAAOW,EAAMX,GAsBvC,GApBIsL,IACFtI,GAAa,cAGXuI,IACFvI,GAAa,YAGXwI,IACFxI,GAAa,gBAGXyI,IACFzI,GAAa,YAGX0I,IACF1I,GAAa,gBAGX+C,EAAKrD,MAAMgI,WAAY,CACzB,IAAMF,EAAIzE,EAAKrD,MAAMkI,QAAQJ,EAAIzE,EAAKrD,MAAMiI,aAAaH,EAErDc,IACFlG,EAAQ,CACNuG,UAAS,aAAAxN,OAAeqM,EAAf,YAITe,IACFnG,EAAQ,CACNuG,UAAS,0BAAAxN,OAA4BqM,EAA5B,aAITgB,IACFpG,EAAQ,CACNuG,UAAS,0BAAAxN,OAA4BqM,EAA5B,aAITiB,IACFrG,EAAQ,CACNuG,UAAS,yBAAAxN,OAA2BqM,EAA3B,aAITkB,IACFtG,EAAQ,CACNuG,UAAS,yBAAAxN,OAA2BqM,EAA3B,aAKf,OACErH,EAAA1E,EAAA2E,cAAA,OAAKxH,IAAG,eAAAuC,OAAiB6B,GAAMgD,UAAWA,EAAWoC,MAAOA,GAC1DjC,EAAA1E,EAAA2E,cAAA,OACEJ,UAAU,cACVoC,MAAO,CACLwG,gBAAe,OAAAzN,OAASwC,EAAMG,YAAf,mBAxNQsD,kBCXpByH,GADpBtH,yUAGiCjC,EAAOwJ,aAAP,oCAE5B,SAAAhM,IACO7C,EAAM0D,OAASb,EAAO,KACzB7C,EAAM0D,MAAQb,EAAO,IAEvB7C,EAAM6C,OAASA,WANbA,SAUN7C,EAAM6C,OAASA,gIAIf,IAAIkD,EAAY,SAMhB,OAJI/F,EAAMiK,iBACRlE,GAAa,oBAIbG,EAAA1E,EAAA2E,cAAA,OAAKJ,UAAWA,GACdG,EAAA1E,EAAA2E,cAAC2I,GAAD,MACA5I,EAAA1E,EAAA2E,cAAC4I,GAAD,MACA7I,EAAA1E,EAAA2E,cAAC6I,GAAD,MACA9I,EAAA1E,EAAA2E,cAAC8I,GAAD,MACA/I,EAAA1E,EAAA2E,cAAC+I,GAAD,MACAhJ,EAAA1E,EAAA2E,cAACgJ,GAAD,MACAjJ,EAAA1E,EAAA2E,cAACiJ,GAAD,MACAlJ,EAAA1E,EAAA2E,cAACkJ,GAAD,cA/B4BlI,kBCPrBmI,OAJf,WACE,OAAOpJ,EAAA1E,EAAA2E,cAACoJ,GAAD,qBCGTC,IAAS1J,OAAOI,EAAA1E,EAAA2E,cAACsJ,GAAD,MAASC,SAASC,cAAc","file":"static/js/main.828ffadf.chunk.js","sourcesContent":["import { observable, computed } from \"mobx\";\r\nimport { Track } from \"../lib/Tracks\";\r\n\r\ninterface IPlayerStoreInitialState {\r\n  shuffle?: boolean;\r\n  repeat?: boolean;\r\n  volume?: number;\r\n}\r\n\r\nexport class PlayerStore {\r\n  @observable private _volume: number = 0.2;\r\n  @observable public progress: number = 0;\r\n  @observable public shuffle: boolean = false;\r\n  @observable public repeat: boolean = false;\r\n  @observable public paused: boolean = true;\r\n  @observable public track: Track | null = null;\r\n  @observable public tracks: Track[] = [];\r\n  @observable public playlistActive: boolean = false;\r\n  @observable public audioPlayerProgressNeedsUpdate: boolean = false;\r\n  @observable public sidebarIsActive: boolean = false;\r\n\r\n  constructor({ volume, shuffle, repeat }: IPlayerStoreInitialState = {}) {\r\n    if (typeof volume === \"number\") {\r\n      this.volume = volume;\r\n    }\r\n\r\n    if (typeof shuffle === \"boolean\") {\r\n      this.shuffle = shuffle;\r\n    }\r\n\r\n    if (typeof repeat === \"boolean\") {\r\n      this.repeat = repeat;\r\n    }\r\n  }\r\n\r\n  @computed\r\n  get volume(): number {\r\n    return this._volume;\r\n  }\r\n\r\n  set volume(volume: number) {\r\n    if (volume > 1) {\r\n      this._volume = 1;\r\n    } else if (volume < 0) {\r\n      this._volume = 0;\r\n    } else {\r\n      this._volume = volume;\r\n    }\r\n  }\r\n}\r\n\r\nlet config: IPlayerStoreInitialState = {};\r\n\r\ntry {\r\n  const json = localStorage.getItem(\"playerConfiguration\");\r\n\r\n  if (json) {\r\n    const data = JSON.parse(json);\r\n\r\n    config.shuffle = data.shuffle;\r\n    config.repeat = data.repeat;\r\n    config.volume = data.volume;\r\n  }\r\n} catch (err) {}\r\n\r\nexport const store = new PlayerStore(config);\r\n","export interface TrackUser {\r\n  id: number;\r\n  kind: string;\r\n  permalink: string;\r\n  username: string;\r\n  last_modified: string;\r\n  uri: string;\r\n  permalink_url: string;\r\n  avatar_url: string;\r\n}\r\n\r\nexport interface Track {\r\n  kind: string;\r\n  id: number;\r\n  created_at: string;\r\n  user_id: number;\r\n  duration: number;\r\n  commentable: boolean;\r\n  state: string;\r\n  original_content_size: number;\r\n  last_modified: string;\r\n  sharing: string;\r\n  tag_list: string;\r\n  permalink: string;\r\n  streamable: boolean;\r\n  embeddable_by: string;\r\n  downloadable: boolean;\r\n  purchase_url: null;\r\n  label_id: null;\r\n  purchase_title: null;\r\n  genre: string;\r\n  title: string;\r\n  description: string;\r\n  label_name: string;\r\n  release: string;\r\n  track_type: string;\r\n  key_signature: string;\r\n  isrc: string;\r\n  video_url: null;\r\n  bpm: null;\r\n  release_year: null;\r\n  release_month: null;\r\n  release_day: null;\r\n  original_format: string;\r\n  license: string;\r\n  uri: string;\r\n  user: TrackUser;\r\n  attachments_uri: string | null;\r\n  permalink_url: string | null;\r\n  artwork_url: string | null;\r\n  waveform_url: string | null;\r\n  stream_url: string;\r\n  playback_count: number;\r\n  download_count: number;\r\n  favoritings_count: number;\r\n  comment_count: number;\r\n}\r\n\r\nexport interface TrackData {\r\n  kind: string;\r\n  created_at: string;\r\n  track: Track;\r\n  playlist: string | null;\r\n}\r\n\r\nexport interface LikesResponse {\r\n  collection: TrackData[];\r\n  next_href?: string;\r\n}\r\n\r\nexport interface Profile {\r\n  country: string | null;\r\n  subscriptions: [];\r\n  city: string | null;\r\n  description: string | null;\r\n  track_count: number;\r\n  discogs_name: string | null;\r\n  public_favorites_count: number;\r\n  id: number;\r\n  reposts_count: number;\r\n  myspace_name: string | null;\r\n  website_title: string | null;\r\n  last_modified: string;\r\n  first_name: string | null;\r\n  plan: string;\r\n  playlist_count: number;\r\n  website: string | null;\r\n  kind: string;\r\n  last_name: string | null;\r\n  uri: string;\r\n  followings_count: number;\r\n  full_name: string;\r\n  avatar_url: string | null;\r\n  followers_count: number;\r\n  online: boolean;\r\n  permalink: string;\r\n  permalink_url: string;\r\n  username: string;\r\n}\r\n\r\ninterface CoverSize {\r\n  x500: string;\r\n  x400: string;\r\n  x300: string;\r\n  x100: string;\r\n  x67: string;\r\n  x47: string;\r\n  x32: string;\r\n  x20: string;\r\n  x18: string;\r\n  x16: string;\r\n}\r\n\r\nconst coverSize: CoverSize = {\r\n  x500: \"t500x500\",\r\n  x400: \"crop\",\r\n  x300: \"t300x300\",\r\n  x100: \"large\",\r\n  x67: \"t67x67\",\r\n  x47: \"badge\",\r\n  x32: \"small\",\r\n  x20: \"tiny\",\r\n  x18: \"tiny\",\r\n  x16: \"mini\",\r\n};\r\n\r\nfunction buildUrl(url: string, params?: { [key: string]: any }): string {\r\n  if (params) {\r\n    return (\r\n      url +\r\n      \"?\" +\r\n      Object.keys(params)\r\n        .map((param: string) => {\r\n          return `${param}=${encodeURIComponent(params[param])}`;\r\n        })\r\n        .join(\"&\")\r\n    );\r\n  } else {\r\n    return url;\r\n  }\r\n}\r\n\r\nasync function get(url: string, params?: {}): Promise<any> {\r\n  const response = await fetch(buildUrl(url, params));\r\n  const json = await response.json();\r\n\r\n  return json;\r\n}\r\n\r\nasync function getProfileData(profileUrl: string): Promise<Profile> {\r\n  try {\r\n    return await get(`https://api.soundcloud.com/resolve`, {\r\n      client_id: process.env.REACT_APP_SC_CLIENT_ID,\r\n      url: profileUrl,\r\n    });\r\n  } catch (err) {\r\n    throw new Error(\"Unable to load Soundcloud profile data.\");\r\n  }\r\n}\r\n\r\nasync function getProfileLikes(\r\n  profile: Profile,\r\n  progressCallback?: (tracks: Track[]) => void,\r\n): Promise<Track[]> {\r\n  let tracks: Track[] = [];\r\n\r\n  let response: LikesResponse = await get(\r\n    `https://api.soundcloud.com/e1/users/${profile.id}/likes`,\r\n    {\r\n      format: \"json\",\r\n      limit: 24,\r\n      date: Date.now(),\r\n      client_id: process.env.REACT_APP_SC_CLIENT_ID,\r\n      linked_partitioning: 1,\r\n    },\r\n  );\r\n\r\n  while (response.next_href) {\r\n    tracks = tracks.concat(prepeareTracks(response.collection));\r\n\r\n    if (progressCallback) {\r\n      progressCallback(tracks);\r\n    }\r\n\r\n    response = await get(response.next_href);\r\n  }\r\n\r\n  tracks = tracks.concat(prepeareTracks(response.collection));\r\n\r\n  return tracks;\r\n}\r\n\r\nfunction prepeareTracks(tracks: TrackData[]): Track[] {\r\n  const tracks2 = tracks\r\n    .filter(track => track.track !== null)\r\n    .map(track => prepeareTrack(track));\r\n  return tracks2;\r\n}\r\n\r\nfunction prepeareTrack(trackData: TrackData): Track {\r\n  const track = trackData.track;\r\n\r\n  return {\r\n    ...track,\r\n    artwork_url: getArtwork(track, coverSize.x500),\r\n    stream_url:\r\n      track.stream_url + \"?client_id=\" + process.env.REACT_APP_SC_CLIENT_ID,\r\n  };\r\n}\r\n\r\nfunction getArtwork(track: Track, size: string): string {\r\n  if (track.artwork_url !== null) {\r\n    return track.artwork_url.replace(/large/, size);\r\n  } else if (track.user.avatar_url !== null) {\r\n    if (track.user.avatar_url.includes(\"default_avatar\")) {\r\n      return process.env.PUBLIC_URL + \"no-cover.svg\";\r\n    } else {\r\n      return track.user.avatar_url.replace(/large/, size);\r\n    }\r\n  }\r\n\r\n  return \"\";\r\n}\r\n\r\nlet shuffleTracks: Track[] = [];\r\n\r\nexport function getRandomTrack(\r\n  tracks: Track[],\r\n  currentTrack: Track | null,\r\n): Track {\r\n  let foundTrack = tracks[Math.floor(Math.random() * tracks.length)];\r\n\r\n  if (tracks.length > 1 && currentTrack && foundTrack.id === currentTrack.id) {\r\n    return getRandomTrack(tracks, currentTrack);\r\n  }\r\n\r\n  return foundTrack;\r\n}\r\n\r\nexport function next(\r\n  tracks: Track[],\r\n  track: Track | null,\r\n  shuffle: boolean,\r\n): Track | null {\r\n  const findNextTrack = (): Track | null => {\r\n    if (track) {\r\n      const trackId = track.id;\r\n      const trackIndex = tracks.findIndex(track => track.id === trackId);\r\n\r\n      if (trackIndex < tracks.length - 1) {\r\n        return tracks[trackIndex + 1] || null;\r\n      } else if (tracks.length > 0) {\r\n        return tracks[0] || null;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  const findRandomTrack = (): Track | null => {\r\n    const foundTrack = getRandomTrack(tracks, track);\r\n\r\n    if (foundTrack) {\r\n      shuffleTracks.push(foundTrack);\r\n    }\r\n\r\n    return foundTrack || null;\r\n  };\r\n\r\n  if (shuffle) {\r\n    return findRandomTrack();\r\n  } else {\r\n    return findNextTrack();\r\n  }\r\n}\r\n\r\nexport function prev(\r\n  tracks: Track[],\r\n  track: Track | null,\r\n  shuffle: boolean,\r\n): Track | null {\r\n  const findPrevTrack = (): Track | null => {\r\n    if (track) {\r\n      const trackId = track.id;\r\n      const trackIndex = tracks.findIndex(track => track.id === trackId);\r\n\r\n      if (trackIndex > 0) {\r\n        return tracks[trackIndex - 1] || null;\r\n      } else if (tracks.length > 0) {\r\n        return tracks[tracks.length - 1] || null;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  if (shuffle) {\r\n    if (shuffleTracks.length > 1) {\r\n      shuffleTracks.pop();\r\n      return shuffleTracks.pop() || null;\r\n    } else {\r\n      return findPrevTrack();\r\n    }\r\n  } else {\r\n    return findPrevTrack();\r\n  }\r\n}\r\n\r\nexport default class Tracks {\r\n  static async demo(): Promise<Track[]> {\r\n    const tracks: TrackData[] = require(\"../sc.json\");\r\n\r\n    return prepeareTracks(tracks);\r\n  }\r\n\r\n  static async profileLikes(\r\n    profileUrl: string,\r\n    progressCallback?: (tracks: Track[]) => void,\r\n  ): Promise<Track[]> {\r\n    const profile: Profile = await getProfileData(profileUrl);\r\n    const tracks: Track[] = await getProfileLikes(profile, progressCallback);\r\n\r\n    return tracks;\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\n\r\ninterface PlayerControlProps {\r\n  children?: React.ReactNode;\r\n  className?: string;\r\n  action?: () => void;\r\n  active?: boolean;\r\n  ripple?: boolean;\r\n}\r\n\r\ninterface PlayerControlState {\r\n  animated: boolean;\r\n}\r\n\r\nexport default class PlayerControl extends Component<\r\n  PlayerControlProps,\r\n  PlayerControlState\r\n> {\r\n  static defaultProps = {\r\n    ripple: true,\r\n  };\r\n\r\n  constructor(props: PlayerControlProps, state: PlayerControlState) {\r\n    super(props, state);\r\n\r\n    this.state = {\r\n      animated: false,\r\n    };\r\n  }\r\n\r\n  render = () => {\r\n    let className = \"control\";\r\n\r\n    if (this.props.className) {\r\n      className += ` ${this.props.className}`;\r\n    }\r\n\r\n    if (this.props.active) {\r\n      className += ` is-active`;\r\n    }\r\n\r\n    let ripple: React.ReactNode = \"\";\r\n\r\n    if (this.props.ripple) {\r\n      ripple = (\r\n        <CSSTransition\r\n          in={this.state.animated}\r\n          classNames=\"ripple\"\r\n          timeout={300}\r\n          onEntered={() => {\r\n            this.setState({\r\n              animated: false,\r\n            });\r\n          }}\r\n        >\r\n          <div className=\"ripple\" />\r\n        </CSSTransition>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div\r\n        className={className}\r\n        onMouseDownCapture={(e: React.MouseEvent | React.TouchEvent) => {\r\n          e.preventDefault();\r\n\r\n          this.setState({\r\n            animated: true,\r\n          });\r\n        }}\r\n        onTouchStartCapture={(e: React.MouseEvent | React.TouchEvent) => {\r\n          e.preventDefault();\r\n\r\n          this.setState({\r\n            animated: true,\r\n          });\r\n        }}\r\n        onMouseUpCapture={(e: React.MouseEvent | React.TouchEvent) => {\r\n          e.preventDefault();\r\n\r\n          if (this.props.action) {\r\n            this.props.action();\r\n          }\r\n        }}\r\n        onTouchEndCapture={(e: React.MouseEvent | React.TouchEvent) => {\r\n          e.preventDefault();\r\n\r\n          if (this.props.action) {\r\n            this.props.action();\r\n          }\r\n        }}\r\n      >\r\n        {ripple}\r\n        {this.props.children}\r\n      </div>\r\n    );\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { store } from \"../store/PlayerStore\";\r\nimport PlayerControl from \"./PlayerControl\";\r\n\r\n@observer\r\nexport default class SidebarButton extends Component {\r\n  render() {\r\n    return (\r\n      <PlayerControl\r\n        className=\"sidebar-button\"\r\n        active={store.sidebarIsActive}\r\n        action={() => {\r\n          store.sidebarIsActive = !store.sidebarIsActive;\r\n        }}\r\n      >\r\n        <div className=\"line line-1\" />\r\n        <div className=\"line line-2\" />\r\n        <div className=\"line line-3\" />\r\n      </PlayerControl>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\ninterface InputRangeProps {\r\n  min: number;\r\n  max: number;\r\n  step: number;\r\n  value: number;\r\n  className?: string;\r\n  onStart?: (value: number) => void;\r\n  onEnd?: (value: number) => void;\r\n  onChange?: (value: number) => void;\r\n}\r\n\r\ninterface InputRangeState {\r\n  value: number;\r\n  changing: boolean;\r\n}\r\n\r\nexport default class InputRange extends Component<\r\n  InputRangeProps,\r\n  InputRangeState\r\n> {\r\n  inputValue: number;\r\n  trackWidth: number;\r\n\r\n  constructor(props: InputRangeProps, state: InputRangeState) {\r\n    super(props, state);\r\n    this.inputValue = 0;\r\n    this.trackWidth = 0;\r\n\r\n    this.state = {\r\n      value: this.props.value,\r\n      changing: false,\r\n    };\r\n  }\r\n\r\n  changeStart = (e: React.MouseEvent | React.TouchEvent) => {\r\n    this.setState({\r\n      value: this.props.value,\r\n      changing: true,\r\n    });\r\n\r\n    if (this.props.onStart) {\r\n      this.props.onStart(this.state.value);\r\n    }\r\n  };\r\n\r\n  changeStop = (e: React.MouseEvent | React.TouchEvent) => {\r\n    this.setState({\r\n      changing: false,\r\n    });\r\n\r\n    if (this.props.onEnd) {\r\n      this.props.onEnd(this.state.value);\r\n    }\r\n  };\r\n\r\n  render = () => {\r\n    let inputValue = this.props.value;\r\n\r\n    if (this.state.changing) {\r\n      inputValue = this.state.value;\r\n    }\r\n\r\n    const trackWidth = (inputValue / this.props.max) * 100;\r\n\r\n    let className = \"input-range\";\r\n\r\n    if (this.props.className) {\r\n      className += \" \" + this.props.className;\r\n    }\r\n\r\n    return (\r\n      <div className={className}>\r\n        <div className=\"input-range-bar\">\r\n          <div\r\n            className=\"input-range-track\"\r\n            style={{ width: `${trackWidth}%` }}\r\n          />\r\n        </div>\r\n        <input\r\n          className=\"input-element\"\r\n          type=\"range\"\r\n          value={inputValue}\r\n          min={this.props.min}\r\n          max={this.props.max}\r\n          step={this.props.step}\r\n          onChange={e => {\r\n            const value = parseFloat(e.target.value);\r\n\r\n            this.setState({\r\n              value,\r\n            });\r\n\r\n            if (this.props.onChange) {\r\n              this.props.onChange(value);\r\n            }\r\n          }}\r\n          onMouseDownCapture={e => {\r\n            this.changeStart(e);\r\n          }}\r\n          onTouchStartCapture={e => {\r\n            this.changeStart(e);\r\n          }}\r\n          onMouseUpCapture={e => {\r\n            this.changeStop(e);\r\n          }}\r\n          onTouchEndCapture={e => {\r\n            this.changeStop(e);\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { store } from \"../store/PlayerStore\";\r\nimport throttle from \"lodash/throttle\";\r\nimport VolumeMute from \"@material-ui/icons/VolumeMute\";\r\nimport VolumeUp from \"@material-ui/icons/VolumeUp\";\r\nimport PlayerControl from \"./PlayerControl\";\r\nimport InputRange from \"./InputRange\";\r\n\r\n@observer\r\nexport default class Sidebar extends Component {\r\n  updateVolume = throttle((volume: number) => {\r\n    store.volume = volume;\r\n  }, 20);\r\n\r\n  render() {\r\n    let className = \"sidebar\";\r\n    let volumeClassName = \"volume\";\r\n\r\n    if (store.sidebarIsActive) {\r\n      className += \" is-active\";\r\n    }\r\n\r\n    if (store.volume === 0) {\r\n      volumeClassName += \" is-muted\";\r\n    }\r\n\r\n    return (\r\n      <div className={className}>\r\n        <div\r\n          className=\"sidebar-back\"\r\n          onClick={() => {\r\n            store.sidebarIsActive = false;\r\n          }}\r\n        />\r\n        <div className=\"sidebar-content\">\r\n          <div className=\"sidebar-header\">\r\n            <div className=\"profile\">\r\n              <img\r\n                className=\"profile-image\"\r\n                src={process.env.PUBLIC_URL + \"icon-128.png\"}\r\n                alt=\"\"\r\n                width=\"64\"\r\n                height=\"64\"\r\n              />\r\n              <div className=\"profile-info\">\r\n                <div className=\"profile-name\">Prof</div>\r\n                <div className=\"profile-email\">online7890@gmail.com</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"sidebar-controls\">\r\n            <div className={volumeClassName}>\r\n              <PlayerControl\r\n                className=\"volume-button\"\r\n                action={() => {\r\n                  store.volume = 0;\r\n                }}\r\n                ripple={true}\r\n              >\r\n                <VolumeUp className=\"volume-icon volume-up\" />\r\n                <VolumeMute className=\"volume-icon volume-mute\" />\r\n              </PlayerControl>\r\n              <InputRange\r\n                min={0}\r\n                max={1}\r\n                step={0.01}\r\n                value={store.volume}\r\n                onChange={volume => this.updateVolume(volume)}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export default class Utils {\r\n  static formatTimestamp(t: number): string {\r\n    const h = Math.floor(t / 1000 / 3600);\r\n    const m = Math.floor((t - h * 1000 * 3600) / 1000 / 60);\r\n    const s = Math.floor((t / 1000) % 60);\r\n\r\n    const time = [];\r\n\r\n    if (h > 0) {\r\n      time.push(h);\r\n      time.push(m > 10 ? m : \"0\" + m);\r\n    } else {\r\n      time.push(m);\r\n    }\r\n\r\n    time.push(s > 10 ? s : \"0\" + s);\r\n\r\n    return time.join(\":\");\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { store } from \"../store/PlayerStore\";\r\nimport Utils from \"../lib/Utils\";\r\n\r\ninterface ITrackShortInfo {\r\n  title: string;\r\n  user: string;\r\n  duration: number;\r\n}\r\n\r\n@observer\r\nexport default class TrackInfo extends Component {\r\n  render() {\r\n    const track: ITrackShortInfo = {\r\n      title: store.track ? store.track.title : \"No Track\",\r\n      user: store.track ? store.track.user.username : \"No User\",\r\n      duration: store.track ? store.track.duration : 0,\r\n    };\r\n\r\n    return (\r\n      <div\r\n        className=\"track-info\"\r\n        onClick={() => {\r\n          store.playlistActive = !store.playlistActive;\r\n        }}\r\n      >\r\n        <div className=\"visualization-waves\">\r\n          <div className=\"wave\" />\r\n          <div className=\"wave\" />\r\n          <div className=\"wave\" />\r\n        </div>\r\n        <div className=\"track-title\">{track.title}</div>\r\n        <div className=\"track-user\">{track.user}</div>\r\n        <div className=\"track-time\">\r\n          <div className=\"current-time\">0:00</div>\r\n          <div className=\"separator\">/</div>\r\n          <div className=\"current-duration\">\r\n            {Utils.formatTimestamp(track.duration)}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { store } from \"../store/PlayerStore\";\r\nimport throttle from \"lodash/throttle\";\r\nimport InputRange from \"./InputRange\";\r\n\r\n@observer\r\nexport default class Progress extends Component {\r\n  updateProgress = throttle((progress: number) => {\r\n    store.progress = progress;\r\n    store.audioPlayerProgressNeedsUpdate = true;\r\n  }, 20);\r\n\r\n  changeStart(e: React.MouseEvent | React.TouchEvent) {\r\n    this.setState({\r\n      changing: true,\r\n    });\r\n  }\r\n\r\n  changeStop(e: React.MouseEvent | React.TouchEvent) {\r\n    const progress = parseInt((e.target as HTMLInputElement).value);\r\n\r\n    this.setState({\r\n      changing: false,\r\n    });\r\n\r\n    this.updateProgress(progress);\r\n  }\r\n\r\n  render() {\r\n    const max = store.track ? store.track.duration : 0;\r\n\r\n    return (\r\n      <InputRange\r\n        className=\"progress\"\r\n        min={0}\r\n        max={max}\r\n        step={1}\r\n        value={store.progress}\r\n        onEnd={value => this.updateProgress(value)}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import { Component } from \"react\";\r\nimport { reaction } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { store } from \"../store/PlayerStore\";\r\nimport throttle from \"lodash/throttle\";\r\nimport { next, Track } from \"../lib/Tracks\";\r\n\r\ninterface IAudioPlayerProps {}\r\n\r\ninterface IAudioPlayerState {}\r\n\r\n@observer\r\nexport default class AudioPlayer extends Component<\r\n  IAudioPlayerProps,\r\n  IAudioPlayerState\r\n> {\r\n  audio: HTMLAudioElement;\r\n\r\n  constructor(props: IAudioPlayerProps, state: IAudioPlayerState) {\r\n    super(props, state);\r\n\r\n    this.audio = new Audio();\r\n\r\n    this.audio.volume = store.volume;\r\n    this.audio.currentTime = 0;\r\n\r\n    reaction(\r\n      () => store.volume,\r\n      volume => {\r\n        this.audio.volume = volume;\r\n      },\r\n    );\r\n\r\n    reaction(\r\n      () => store.paused,\r\n      async paused => {\r\n        if (paused) {\r\n          await this.audio.pause();\r\n        } else {\r\n          try {\r\n            await this.audio.play();\r\n          } catch (err) {\r\n            console.log(err);\r\n          }\r\n        }\r\n      },\r\n    );\r\n\r\n    reaction(\r\n      () => store.track,\r\n      (track: Track | null) => {\r\n        if (track) {\r\n          this.audio.src = track.stream_url;\r\n        }\r\n      },\r\n    );\r\n\r\n    reaction(\r\n      () => store.audioPlayerProgressNeedsUpdate,\r\n      audioPlayerProgressNeedsUpdate => {\r\n        if (audioPlayerProgressNeedsUpdate) {\r\n          this.audio.currentTime = store.progress / 1000;\r\n          store.audioPlayerProgressNeedsUpdate = false;\r\n        }\r\n      },\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.audio.addEventListener(\"error\", (err: ErrorEvent) => {\r\n      if (this.audio && store.track) {\r\n        this.audio.src = store.track.stream_url;\r\n      }\r\n    });\r\n\r\n    this.audio.addEventListener(\"canplay\", async () => {\r\n      if (!store.paused) {\r\n        try {\r\n          await this.audio.play();\r\n        } catch (err) {\r\n          console.warn(err);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.audio.addEventListener(\"loadstart\", async () => {\r\n      if (!store.paused) {\r\n        try {\r\n          await this.audio.play();\r\n        } catch (err) {\r\n          console.warn(err);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.audio.addEventListener(\r\n      \"timeupdate\",\r\n      throttle(() => {\r\n        store.progress = this.audio.currentTime * 1000;\r\n      }, 16),\r\n    );\r\n\r\n    this.audio.addEventListener(\"ended\", () => {\r\n      if (!store.repeat) {\r\n        const track = next(store.tracks, store.track, store.shuffle);\r\n\r\n        if (track) {\r\n          store.track = track;\r\n          store.progress = 0;\r\n          store.audioPlayerProgressNeedsUpdate = true;\r\n        }\r\n      } else {\r\n        if (store.track) {\r\n          store.progress = 0;\r\n          store.audioPlayerProgressNeedsUpdate = true;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { store } from \"../store/PlayerStore\";\r\nimport { next, prev } from \"../lib/Tracks\";\r\nimport PlayerControl from \"./PlayerControl\";\r\nimport Shuffle from \"@material-ui/icons/Shuffle\";\r\nimport SkipPrevious from \"@material-ui/icons/SkipPrevious\";\r\nimport SkipNext from \"@material-ui/icons/SkipNext\";\r\nimport PlayArrow from \"@material-ui/icons/PlayArrow\";\r\nimport Pause from \"@material-ui/icons/Pause\";\r\nimport Repeat from \"@material-ui/icons/Repeat\";\r\nimport RepeatOne from \"@material-ui/icons/RepeatOne\";\r\n\r\n@observer\r\nexport default class PlayerControls extends Component {\r\n  playToggle() {\r\n    store.paused = !store.paused;\r\n  }\r\n\r\n  shuffleToggle() {\r\n    store.shuffle = !store.shuffle;\r\n  }\r\n\r\n  repeatToggle() {\r\n    store.repeat = !store.repeat;\r\n  }\r\n\r\n  prevTrack() {\r\n    const track = prev(store.tracks, store.track, store.shuffle);\r\n\r\n    if (track) {\r\n      store.track = track;\r\n      store.progress = 0;\r\n    }\r\n  }\r\n\r\n  nextTrack() {\r\n    const track = next(store.tracks, store.track, store.shuffle);\r\n\r\n    if (track) {\r\n      store.track = track;\r\n      store.progress = 0;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const classNames = {\r\n      shuffle: `control control-shuffle`,\r\n      prev: `control control-prev`,\r\n      play: `control control-play`,\r\n      next: `control control-next`,\r\n      repeat: `control control-repeat`,\r\n    };\r\n\r\n    classNames.play += !store.paused ? \" is-active\" : \"\";\r\n    classNames.shuffle += store.shuffle ? \" is-active\" : \"\";\r\n    classNames.repeat += store.repeat ? \" is-active\" : \"\";\r\n\r\n    return (\r\n      <div className=\"player-controls\">\r\n        <PlayerControl\r\n          className=\"control-shuffle\"\r\n          active={store.shuffle}\r\n          action={() => {\r\n            this.shuffleToggle();\r\n          }}\r\n        >\r\n          <Shuffle className=\"control-icon icon-shuffle\" />\r\n        </PlayerControl>\r\n\r\n        <PlayerControl\r\n          className={classNames.prev}\r\n          action={() => {\r\n            this.prevTrack();\r\n          }}\r\n        >\r\n          <SkipPrevious className=\"control-icon icon-prev\" />\r\n        </PlayerControl>\r\n\r\n        <PlayerControl\r\n          className=\"control-play\"\r\n          active={!store.paused}\r\n          action={() => {\r\n            this.playToggle();\r\n          }}\r\n          ripple={false}\r\n        >\r\n          <PlayArrow className=\"control-icon icon-play\" />\r\n          <Pause className=\"control-icon icon-pause\" />\r\n        </PlayerControl>\r\n\r\n        <PlayerControl\r\n          className={classNames.next}\r\n          action={() => {\r\n            this.nextTrack();\r\n          }}\r\n        >\r\n          <SkipNext className=\"control-icon icon-next\" />\r\n        </PlayerControl>\r\n\r\n        <PlayerControl\r\n          className=\"control-repeat\"\r\n          active={store.repeat}\r\n          action={() => {\r\n            this.repeatToggle();\r\n          }}\r\n        >\r\n          <Repeat className=\"control-icon icon-repeat-inactive\" />\r\n          <RepeatOne className=\"control-icon icon-repeat-active\" />\r\n        </PlayerControl>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { reaction } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { store } from \"../store/PlayerStore\";\r\nimport { Track } from \"../lib/Tracks\";\r\nimport Utils from \"../lib/Utils\";\r\nimport PlayArrow from \"@material-ui/icons/PlayArrow\";\r\nimport Pause from \"@material-ui/icons/Pause\";\r\n\r\n@observer\r\nexport default class Playlist extends Component {\r\n  playlist: HTMLDivElement | null;\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n\r\n    this.playlist = null;\r\n\r\n    reaction(\r\n      () => store.track,\r\n      () => {\r\n        this.scrollToTrack();\r\n      },\r\n    );\r\n  }\r\n\r\n  playTrack(track: Track) {\r\n    if (!store.track || store.track.id !== track.id) {\r\n      store.track = track;\r\n      store.paused = false;\r\n    } else {\r\n      store.paused = !store.paused;\r\n    }\r\n  }\r\n\r\n  scrollToTrack() {\r\n    if (this.playlist) {\r\n      const id = store.tracks.findIndex(track => track === store.track);\r\n      const trackHeight = 50;\r\n      const top =\r\n        id * trackHeight - this.playlist.offsetHeight / 2 + trackHeight / 2;\r\n\r\n      this.playlist.scrollTo({\r\n        top: top,\r\n        behavior: \"smooth\",\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"playlist\"\r\n        ref={ref => {\r\n          this.playlist = ref;\r\n        }}\r\n      >\r\n        <div className=\"tracks-list\">\r\n          {store.tracks.map((track, id) => {\r\n            let className: string = \"track-item\";\r\n            let progressWidth: number = 0;\r\n\r\n            if (store.track && track.id === store.track.id) {\r\n              className += \" is-active\";\r\n\r\n              if (store.paused === false) {\r\n                className += \" is-playing\";\r\n              }\r\n\r\n              if (store.progress > 0) {\r\n                progressWidth = (store.progress / store.track.duration) * 100;\r\n              }\r\n            }\r\n\r\n            return (\r\n              <div\r\n                className={className}\r\n                key={`track-item-${id}`}\r\n                onClick={() => this.playTrack(track)}\r\n              >\r\n                <div\r\n                  className=\"track-progress\"\r\n                  style={{ width: `${progressWidth}%` }}\r\n                />\r\n                <div className=\"play-track\">\r\n                  <PlayArrow className=\"play-icon\" />\r\n                  <Pause className=\"pause-icon\" />\r\n                </div>\r\n                <div className=\"track-meta\">\r\n                  <div className=\"track-title\">{track.title}</div>\r\n                  <div className=\"track-user\">{track.user.username}</div>\r\n                </div>\r\n                <div className=\"track-duration\">\r\n                  {Utils.formatTimestamp(track.duration)}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { reaction } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { store } from \"../store/PlayerStore\";\r\nimport { next, prev, Track } from \"../lib/Tracks\";\r\n// import throttle from \"lodash/throttle\";\r\n\r\ninterface IPointer {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\ninterface TrackImagesProps {}\r\n\r\ninterface TrackImagesState {\r\n  isDragging: boolean;\r\n  pointerStart: IPointer;\r\n  pointer: IPointer;\r\n  prevTrack: Track | null;\r\n  prePrevTrack: Track | null;\r\n  nextTrack: Track | null;\r\n  preNextTrack: Track | null;\r\n}\r\n\r\n@observer\r\nexport default class TrackImages extends Component<\r\n  TrackImagesProps,\r\n  TrackImagesState\r\n> {\r\n  slider: HTMLElement | null = null;\r\n\r\n  constructor(props: TrackImagesProps, state: TrackImagesState) {\r\n    super(props, state);\r\n\r\n    const prevTrack = prev(store.tracks, store.track, store.shuffle);\r\n    const prePrevTrack = prev(store.tracks, prevTrack, store.shuffle);\r\n    const nextTrack = next(store.tracks, store.track, store.shuffle);\r\n    const preNextTrack = next(store.tracks, nextTrack, store.shuffle);\r\n\r\n    this.state = {\r\n      isDragging: false,\r\n      pointerStart: { x: 0, y: 0 },\r\n      pointer: { x: 0, y: 0 },\r\n      prevTrack,\r\n      prePrevTrack,\r\n      nextTrack,\r\n      preNextTrack,\r\n    };\r\n\r\n    reaction(\r\n      () => store.tracks,\r\n      tracks => {\r\n        const prevTrack = prev(tracks, store.track, store.shuffle);\r\n        const prePrevTrack = prev(tracks, prevTrack, store.shuffle);\r\n        const nextTrack = next(tracks, store.track, store.shuffle);\r\n        const preNextTrack = next(tracks, nextTrack, store.shuffle);\r\n\r\n        this.setState({\r\n          prevTrack,\r\n          prePrevTrack,\r\n          nextTrack,\r\n          preNextTrack,\r\n        });\r\n      },\r\n    );\r\n\r\n    reaction(\r\n      () => store.track,\r\n      track => {\r\n        const prevTrack = prev(store.tracks, track, store.shuffle);\r\n        const prePrevTrack = prev(store.tracks, prevTrack, store.shuffle);\r\n        const nextTrack = next(store.tracks, track, store.shuffle);\r\n        const preNextTrack = next(store.tracks, nextTrack, store.shuffle);\r\n\r\n        this.setState({\r\n          prevTrack,\r\n          prePrevTrack,\r\n          nextTrack,\r\n          preNextTrack,\r\n        });\r\n      },\r\n    );\r\n  }\r\n\r\n  onPointerDown = (x: number, y: number) => {\r\n    this.setState({\r\n      isDragging: true,\r\n\r\n      pointerStart: {\r\n        x: x,\r\n        y: y,\r\n      },\r\n\r\n      pointer: {\r\n        x: x,\r\n        y: y,\r\n      },\r\n\r\n      prevTrack: prev(store.tracks, store.track, store.shuffle),\r\n\r\n      nextTrack: next(store.tracks, store.track, store.shuffle),\r\n    });\r\n  };\r\n\r\n  onPointerUp = () => {\r\n    if (this.state.isDragging) {\r\n      const dist = this.state.pointer.x - this.state.pointerStart.x;\r\n\r\n      if (Math.abs(dist) > 70) {\r\n        if (dist < 0) {\r\n          store.track = this.state.nextTrack;\r\n        } else {\r\n          store.track = this.state.prevTrack;\r\n        }\r\n      }\r\n\r\n      this.setState({\r\n        isDragging: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  onPointerMove = (x: number, y: number) => {\r\n    if (this.state.isDragging) {\r\n      this.setState({\r\n        pointer: {\r\n          x: x,\r\n          y: y,\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let className = \"track-images\";\r\n\r\n    if (this.state.isDragging) {\r\n      className += \" no-transition\";\r\n    }\r\n\r\n    return (\r\n      <div\r\n        className={className}\r\n        onPointerDown={e => {\r\n          e.preventDefault();\r\n          this.onPointerDown(e.clientX, e.clientY);\r\n        }}\r\n        onPointerUp={e => {\r\n          e.preventDefault();\r\n          this.onPointerUp();\r\n        }}\r\n        onPointerLeave={e => {\r\n          e.preventDefault();\r\n          this.onPointerUp();\r\n        }}\r\n        onPointerMove={e => {\r\n          e.preventDefault();\r\n          this.onPointerMove(e.clientX, e.clientY);\r\n        }}\r\n      >\r\n        {store.tracks.map((track, id) => {\r\n          let className = \"track-image\";\r\n          let style = {};\r\n          const isActive: boolean =\r\n            store.track !== null && store.track.id === track.id;\r\n\r\n          const isPrev: boolean =\r\n            this.state.prevTrack !== null &&\r\n            this.state.prevTrack.id === track.id;\r\n\r\n          const isPrePrev: boolean =\r\n            this.state.prePrevTrack !== null &&\r\n            this.state.prePrevTrack.id === track.id;\r\n\r\n          const isNext: boolean =\r\n            this.state.nextTrack !== null &&\r\n            this.state.nextTrack.id === track.id;\r\n\r\n          const isPreNext: boolean =\r\n            this.state.preNextTrack !== null &&\r\n            this.state.preNextTrack.id === track.id;\r\n\r\n          if (isActive) {\r\n            className += \" is-active\";\r\n          }\r\n\r\n          if (isPrev) {\r\n            className += \" is-prev\";\r\n          }\r\n\r\n          if (isPrePrev) {\r\n            className += \" is-pre-prev\";\r\n          }\r\n\r\n          if (isNext) {\r\n            className += \" is-next\";\r\n          }\r\n\r\n          if (isPreNext) {\r\n            className += \" is-pre-next\";\r\n          }\r\n\r\n          if (this.state.isDragging) {\r\n            const x = this.state.pointer.x - this.state.pointerStart.x;\r\n\r\n            if (isActive) {\r\n              style = {\r\n                transform: `translate(${x}px, 0)`,\r\n              };\r\n            }\r\n\r\n            if (isPrev) {\r\n              style = {\r\n                transform: `translate(calc(-100% + ${x}px), 0)`,\r\n              };\r\n            }\r\n\r\n            if (isPrePrev) {\r\n              style = {\r\n                transform: `translate(calc(-200% + ${x}px), 0)`,\r\n              };\r\n            }\r\n\r\n            if (isNext) {\r\n              style = {\r\n                transform: `translate(calc(100% + ${x}px), 0)`,\r\n              };\r\n            }\r\n\r\n            if (isPreNext) {\r\n              style = {\r\n                transform: `translate(calc(200% + ${x}px), 0)`,\r\n              };\r\n            }\r\n          }\r\n\r\n          return (\r\n            <div key={`track-image-${id}`} className={className} style={style}>\r\n              <div\r\n                className=\"track-cover\"\r\n                style={{\r\n                  backgroundImage: `url(${track.artwork_url})`,\r\n                }}\r\n              />\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { store } from \"../store/PlayerStore\";\r\nimport Tracks, { Track } from \"../lib/Tracks\";\r\nimport SidebarButton from \"./SidebarButton\";\r\nimport Sidebar from \"./Sidebar\";\r\nimport TrackInfo from \"./TrackInfo\";\r\nimport Progress from \"./Progress\";\r\nimport AudioPlayer from \"./AudioPlayer\";\r\nimport PlayerControls from \"./PlayerControls\";\r\nimport Playlist from \"./Playlist\";\r\nimport TrackImages from \"./TrackImages\";\r\n\r\n@observer\r\nexport default class Player extends Component {\r\n  async componentDidMount() {\r\n    const tracks: Track[] = await Tracks.profileLikes(\r\n      `https://soundcloud.com/profesor08`,\r\n      tracks => {\r\n        if (!store.track && tracks[0]) {\r\n          store.track = tracks[0];\r\n        }\r\n        store.tracks = tracks;\r\n      },\r\n    );\r\n\r\n    store.tracks = tracks;\r\n  }\r\n\r\n  render() {\r\n    let className = \"player\";\r\n\r\n    if (store.playlistActive) {\r\n      className += \" playlist-active\";\r\n    }\r\n\r\n    return (\r\n      <div className={className}>\r\n        <SidebarButton />\r\n        <Sidebar />\r\n        <TrackImages />\r\n        <TrackInfo />\r\n        <Progress />\r\n        <AudioPlayer />\r\n        <PlayerControls />\r\n        <Playlist />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// import React, { Component } from \"react\";\r\n// import { connect } from \"react-redux\";\r\n// import { Dispatch } from \"redux\";\r\n// import Tracks, { Track } from \"../lib/Tracks\";\r\n// import {\r\n//   TracksState,\r\n//   PlayerState,\r\n//   setTracksAction,\r\n//   togglePlaylistAction,\r\n//   setTrackAction,\r\n// } from \"../store\";\r\n\r\n// import TrackImages from \"./TrackImages\";\r\n// import PlayerControls from \"./PlayerControls\";\r\n// import TrackInfo from \"./TrackInfo\";\r\n// import Playlist from \"./Playlist\";\r\n// import Progress from \"./Progress\";\r\n// import AudioPlayer from \"./AudioPlayer\";\r\n// import SidebarButton from \"./SidebarButton\";\r\n// import Sidebar from \"./Sidebar\";\r\n\r\n// interface PlayerDispatchToProps {\r\n//   loadTracks: () => void;\r\n//   togglePlaylist: (state: boolean) => void;\r\n//   setTrack: (track: Track) => void;\r\n// }\r\n\r\n// type PlayerStateProps = TracksState & PlayerState;\r\n\r\n// type PlayerProps = PlayerStateProps & PlayerDispatchToProps;\r\n\r\n// class Player extends Component<PlayerProps> {\r\n//   componentDidMount = async () => {\r\n//     await this.props.loadTracks();\r\n//   };\r\n\r\n//   componentDidUpdate = () => {\r\n//     if (!this.props.track && this.props.tracks.length > 0) {\r\n//       this.props.setTrack(this.props.tracks[0]);\r\n//     }\r\n//   };\r\n\r\n//   render = () => {\r\n//     let className = \"player\";\r\n\r\n//     if (this.props.playlistActive) {\r\n//       className += \" playlist-active\";\r\n//     }\r\n\r\n//     return (\r\n//       <div className={className}>\r\n//         <SidebarButton />\r\n//         <Sidebar />\r\n//         <TrackImages />\r\n//         <TrackInfo />\r\n//         <Progress />\r\n//         <AudioPlayer />\r\n//         <PlayerControls />\r\n//         <Playlist />\r\n//       </div>\r\n//     );\r\n//   };\r\n// }\r\n\r\n// interface State {\r\n//   player: PlayerState;\r\n//   tracks: TracksState;\r\n// }\r\n\r\n// const mapStateToProps = (state: State): PlayerStateProps => {\r\n//   return {\r\n//     ...state.player,\r\n//     ...state.tracks,\r\n//   };\r\n// };\r\n\r\n// const mapDispatchToProps = (dispatch: Dispatch): PlayerDispatchToProps => {\r\n//   return {\r\n//     loadTracks: async (): Promise<void> => {\r\n//       // if (process.env.REACT_APP_PRODUCTION === \"true\") {\r\n//       dispatch(\r\n//         setTracksAction(\r\n//           await Tracks.profileLikes(\r\n//             `https://soundcloud.com/profesor08`,\r\n//             tracks => {\r\n//               dispatch(setTracksAction(tracks));\r\n//             },\r\n//           ),\r\n//         ),\r\n//       );\r\n//       // } else {\r\n//       //   dispatch(setTracksAction(await Tracks.demo()));\r\n//       // }\r\n//     },\r\n\r\n//     togglePlaylist: (state: boolean) => {\r\n//       dispatch(togglePlaylistAction(state));\r\n//     },\r\n\r\n//     setTrack: (track: Track): void => {\r\n//       dispatch(setTrackAction(track));\r\n//     },\r\n//   };\r\n// };\r\n\r\n// export default connect(\r\n//   mapStateToProps,\r\n//   mapDispatchToProps,\r\n// )(Player);\r\n","import React from \"react\";\nimport Player from \"./Player\";\n\nfunction App() {\n  return <Player />;\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\n\nimport \"normalize.css\";\nimport \"./index.scss\";\n\nReactDOM.render(<App />, document.querySelector(\".player-container\"));\n"],"sourceRoot":""}